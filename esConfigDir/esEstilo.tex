%% Estilo LaTeX Espacios Editorial UD
%% Autores: Editores UDFJC
%% Versión:  v0.1 30MAR2024
%% Compilar con LuaLaTeX, i.e: lualatex main.tex
\usepackage{caption}
\usepackage{titlesec}
\usepackage{titletoc}
\usepackage[titles]{tocloft}
\usepackage{xcolor}

\definecolor{MSBlack}{rgb}{0.0, 0.0, 0.0}
%\definecolor{MSBLack}{rgb}{.16,.16,.16}
\definecolor{MSLightBlack}{rgb}{.10,.10,.10}
\definecolor{MSCustomGray}{RGB}{144, 147, 150}
\definecolor{MSCustomBlackT}{RGB}{20, 20, 20}
\definecolor{MSCustomBlackST}{RGB}{58, 59, 66}

%\setcounter{secnumdepth}{5} % establece el nivel de numeración (el valor predeterminado para "report" es 3). Con ''-1'' tampoco hay número para los capítulos
%\setcounter{tocdepth}{5} % si quieres todos los niveles en tu tabla de contenidos

\newcommand\fontstit{\medseries}
\newcommand\fontschap{\regseries}
\newcommand\fontssec{\regseries}
\newcommand\fontssubsec{\regseries}
\newcommand\fontssubsubsec{\regseries}
\newcommand\fontsparagraph{\regseries\itshape}

% Small caps
\newcommand{\smallcaps}[1]{\textls[25]{\textsc{\MakeLowercase{#1}}}}

%configuracion para titulos de partes, capitulos, secciones, subsecciones, subsubsecciones
\newcommand{\chapterlabel}{\regseries Capítulo~\thechapter.}

% \titleformat{<command>}[<shape>]{<format>}{<label>}{<sep>}{<before-code>}[<after-code>]

\titleformat{\part}[display]{\color{MSBlack}\fontsize{25pt}{2.0mm}\selectfont\fontstit}{\thepart}{12pt}{\raggedright}
\titleformat{\chapter}[block]{\color{MSBlack}\fontsize{25pt}{2.5mm}\selectfont\fontschap}{\chapterlabel}{0.3em}{\raggedright}
\titleformat{\section}[block]{\color{MSBlack}\fontsize{16pt}{2.0mm}\selectfont\fontssec}{\thesection}{0.5em}{\raggedright}
\titleformat{\subsection}[block]{\color{MSBlack}\fontsize{13pt}{2.0mm}\selectfont\fontssubsec}{\thesubsection}{0.5em}{\raggedright}
\titleformat{\subsubsection}[block]{\color{black}\fontsize{12pt}{2.0mm}\selectfont\fontssubsubsec}{\thesubsubsection}{0.5em}{\raggedright}
\titleformat{\paragraph}[block]{\color{black}\fontsize{12pt}{2.0mm}\selectfont\fontsparagraph}{\theparagraph}{0.5em}{\raggedright}

%Espacios para titulos
%\titlespacing{<command>}{<left>}{<before-sep>}{<after-sep>}[<right-sep>]

\titlespacing{\part}{0cm}{10cm}{2.8cm}
\titlespacing{\chapter}{0cm}{1cm}{2.8cm}
\titlespacing{\section}{0cm}{7mm}{2mm}
\titlespacing{\subsection}{0cm}{5mm}{2mm} 
\titlespacing{\subsubsection}{0cm}{5mm}{0mm}
\titlespacing{\paragraph}{0cm}{5mm}{0mm}

% Configuración para apéndices
\makeatletter
\g@addto@macro{\appendix}{%
  \titleformat{\chapter}[display]{\color{MSBlack}\fontsize{25pt}{2.5mm} \fontschap}{\raggedright Apéndice \thechapter.}{0pt}{\raggedright}%
}
\makeatother

%configuracion tabla de contenido
\titlecontents{part}[0em]
{\bf \sbseries\normalsize}%
{}% numbered sections formatting
{}% unnumbered sections formatting
{\titlerule*[1pc]{}\small\lhseries\contentspage \vspace{1.0mm}}[]%

\titlecontents{chapter}[0em]
{\vspace{1.5mm}\medseries\normalsize}%
{Capítulo~\thecontentslabel.\enspace}% numbered sections formatting
{}% unnumbered sections formatting
{\titlerule*[1pc]{}\footnotesize\lhseries\contentspage \vspace{1mm}}[]%

\titlecontents{section}[1.5em]
{\small\lhseries}%
{}% numbered sections formatting
{}% unnumbered sections formatting
{\titlerule*[1pc]{}\footnotesize\lhseries\contentspage \vspace{0.5mm}}[]%

\titlecontents{subsection}[3em]
{\lhseries}%
{}% numbered sections formatting
{}% unnumbered sections formatting
{\titlerule*[1pc]{}\small\lhseries\contentspage \vspace{0.5mm}}[]%

%configuracion lista de figuras
\renewcommand{\cftfigfont}{\lhseries\footnotesize}
\renewcommand{\cftfigindent}{0em}
\renewcommand{\cftfignumwidth}{6em}
\renewcommand{\cftfigpresnum}{\medseries Figura~}
\renewcommand{\cftfigaftersnum}{}
\renewcommand{\cftfigaftersnumb}{}
\renewcommand{\cftfigleader}{\hfill}
\renewcommand{\cftfigpagefont}{\footnotesize\lhseries}
\renewcommand{\cftfigafterpnum}{\vspace{0.5mm}}

%configuracion lista de tablas
\renewcommand{\cfttabfont}{\lhseries\footnotesize}
\renewcommand{\cfttabindent}{0em}
\renewcommand{\cfttabnumwidth}{4em}
\renewcommand{\cfttabpresnum}{\medseries Tabla~}
\renewcommand{\cfttabaftersnum}{}
\renewcommand{\cfttabaftersnumb}{}
\renewcommand{\cfttableader}{\hfill}
\renewcommand{\cfttabpagefont}{\footnotesize\lhseries}
\renewcommand{\cfttabafterpnum}{\vspace{0.5mm}}

\usepackage{setspace}
\linespread{1.1}
\usepackage[skip=3.5pt, indent=20pt]{parskip}

\usepackage{fancyvrb}\usepackage{fancyhdr}

\fancypagestyle{esstyle}{%
\fancyhead{}
  \fancyfoot{}
  \renewcommand{\headrulewidth}{0pt}
  \fancyhf[HLE]{\lhseries\scriptsize \loauthors}
  \fancyhf[HRO]{\fontsparagraph \scriptsize \texttitulocorto}
  \fancyfoot[LE]{{\fontsize{10.5}{1}\usefont{T1}{Roboto-TLF}{thin}{}\selectfont{E}}\hspace{-0.5mm}{\footnotesize\usefont{T1}{Inter-Sup}{thin}{}\selectfont{\reflectbox{S}}}{\usefont{T1}{Roboto-TLF}{thin}{}\selectfont{\thinspace|\thinspace}}{\lhseries\scriptsize\thepage}}
  \fancyfoot[RO]{{\lhseries\scriptsize\thepage}{\usefont{T1}{Roboto-TLF}{thin}{}\selectfont{\thinspace|\thinspace}}{\fontsize{10.5}{1}\usefont{T1}{Roboto-TLF}{thin}{}\selectfont{E}}\hspace{-0.5mm}{\footnotesize\usefont{T1}{Inter-Sup}{thin}{}\selectfont{\reflectbox{S}}}}
  \fancyfoot[C]{}
}

%https://www.latex-project.org/help/documentation/fntguide.pdf

\fancypagestyle{plain}{%
  \fancyhead{}
  \fancyfoot{}
  \renewcommand{\headrulewidth}{0pt}
  \fancyfoot[LE]{{\fontsize{10.5}{1}\usefont{T1}{Roboto-TLF}{thin}{}\selectfont{E}}\hspace{-0.5mm}{\footnotesize\usefont{T1}{Inter-Sup}{thin}{}\selectfont{\reflectbox{S}}}{\usefont{T1}{Roboto-TLF}{thin}{}\selectfont{\thinspace|\thinspace}}{\lhseries\scriptsize\thepage}}

  \fancyfoot[RO]{{\lhseries\scriptsize\thepage}{\usefont{T1}{Roboto-TLF}{thin}{}\selectfont{\thinspace|\thinspace}}{\fontsize{10.5}{1}\usefont{T1}{Roboto-TLF}{thin}{}\selectfont{E}}\hspace{-0.5mm}{\footnotesize\usefont{T1}{Inter-Sup}{thin}{}\selectfont{\reflectbox{S}}}}
  \fancyfoot[C]{}
}

\assignpagestyle{\chapter}{plain}

%\setcounter{table}{0}
%\counterwithout{table}{chapter}
%\counterwithout{figure}{chapter}
\counterwithin{equation}{chapter}
\captionsetup[figure]{labelfont=bf, labelsep=period, font=footnotesize, justification=centering, width = 0.8\textwidth}
%\captionsetup[table]{labelfont=bf, labelsep=period, font=footnotesize, justification=centering, width = 0.8\textwidth} % unused: no table floats in document

%footnote format
\makeatletter
\renewcommand{\@makefntext}[1]{%
  \begin{list}{}{%
    \setlength{\labelwidth}{1.5em}%
    \setlength{\leftmargin}{\labelwidth}%
    \setlength{\labelsep}{3pt}%
    \setlength{\itemsep}{0pt}%
    \setlength{\partopsep}{0pt}%
    \setlength{\topsep}{0pt}%
    \footnotesize}%
  \item[\@makefnmark\hfil]#1%
  \end{list}%
}
\makeatother

\newcommand{\nota}[1]{\par\vspace{0.5em}\begin{minipage}{0.8\textwidth}\centering\footnotesize\color{MSBlack}\strong{Nota:}~#1\end{minipage}\par}
\newcommand{\fuente}[1]{\par\vspace{0.5em}\begin{minipage}{0.8\textwidth}\centering\footnotesize\color{MSBlack}\strong{Fuente:}~#1\end{minipage}\par}
\newcommand{\propia}{\fuente{Elaboración propia.}}
\newcommand{\pendiente}{\fuente{Pendiente!!!}}

\usepackage{wrapfig}

\newcommand{\espart}[6]{\part[Parte #1]{\protect\thispagestyle{empty}
\vspace{-14.0cm}
   \begin{figure}[ht!]\hspace{-2.9cm}\includegraphics[width=1.045\paperwidth, height=0.5\paperheight]{#2}\end{figure}
\flushleft
  \medseries{\Large\noindent Parte {#3}.}
  ~\\
  ~\\
  ~\\
  ~\\
  \lhseries{#4}
  ~\\
  ~\\
  ~\\
  ~\\
  \lhseries{\Large #5}
  ~\\
  ~\\
  ~\\
  ~\\
  \lhseries{\normalsize #6}
}}

%%%%%%%%%%%%%%%%%%


%%%%%%%%%% PORTADILLA 1 %%%%%%%%%%%%%%%
\newcommand{\portadillauno}[2]{
\vspace*{6.5cm}
\begin{flushleft}
  \linespread{3}
%  \color{MSCustomBlackT}\lsstyle
  \color{MSBlack}\lsstyle
  \fontsize{22pt}{3.0mm} \lhseries

  \leftskip=2mm
  #1   
  \vspace{2mm}
  \leftskip=-5mm

  {\color{white}\colorbox{MSCustomGray}
    {\parbox[][1.5cm][c]{15.2cm}{
        \parbox{12.5cm}{\leftskip=7mm \fontsize{17pt}{2.5mm} \lhseries \vspace{1.0mm}
%          Consed ut escimos num sequid ut aut mos {\break} excerro et et, tempos quam, optat fuga.\vspace{0.5mm}
          #2 \vspace{0.5mm}
        }
      }
    }
  }

\end{flushleft}}
%%%%%%%%%% FIN PORTADILLA 1 %%%%%%%%%%%%%%%

%%%%%%%%%% PORTADILLA 2 %%%%%%%%%%%%%%%
\newcommand{\portadillados}[2]{
\vspace*{6.5cm}
\begin{flushleft}
  \linespread{3}
%  \color{MSCustomBlackT}\lsstyle
  \color{MSBlack}\lsstyle
  \fontsize{22pt}{3.0mm} \lhseries

  \leftskip=2mm
  #1
   
  \vspace{2mm}
  \leftskip=-5mm

  {\parbox[][1.5cm][c]{15.2cm}{
      \parbox{12.5cm}{\leftskip=7mm \fontsize{17pt}{2.5mm} \lhseries \vspace{1.0mm}
%          Consed ut escimos num sequid ut aut mos {\break} excerro et et, tempos quam, optat fuga.\vspace{0.5mm}
          #2 \vspace{0.5mm}
      }
    }
  }
\end{flushleft}}
%%%%%%%%%% PORTADILLA 2 %%%%%%%%%%%%%%%

\makeatletter
\newcommand*\reftoanex[1]{\def\@currentlabelname{#1}}
\makeatother

%% COLOFON ESTILOS
\definecolor{MSGreyCOLOFON}{rgb}{.35,.35,.35}
\definecolor{MSGreyLATEX}{rgb}{.55,.55,.55}

%\usepackage{libertine}
\DeclareRobustCommand\myLaTeX{%
    L\kern-.3em%
    \raisebox{.4ex}{\scshape a}\kern-.13em%
    T\kern-.2em%
    \raisebox{-.5ex}{E}\kern-.13em%
    X%
}

\newcommand{\escolofon}[2]{
\thispagestyle{empty}
\vspace*{10.0cm}
\begin{tikzpicture}[remember picture,overlay]
  \node[text=gray,rotate=0,anchor=east, yshift=5mm] at (15.5,11.5){
    \includegraphics[width=5.0cm, height=4.0cm]{esIcons/logoESColofon_corner.png}
  };
\end{tikzpicture}

\vspace{-4.5cm}
\begin{center}
{\fontsize{7pt}{7pt}\selectfont
\color{MSGreyCOLOFON}
Este libro fue editado y diagramado en} {\fontsize{13pt}{13pt}\selectfont\color{MSGreyLATEX}{\myLaTeX}}
\vspace{3.5cm}

\includegraphics[scale=0.05]{esIcons/logoESColofon.png}
  
  \vspace{0.5cm}
  {\scriptsize
    \color{MSGreyCOLOFON}Este libro se término de imprimir en #1 de #2\\ en la Editorial UD. Bogotá, Colombia.}
\end{center}
}
%%%%%%%%%%%%%%%%%%


% Abstract y resumen
\newcommand{\abstract}[4]{
  {\lhseries\fontsize{18pt}{18pt}\selectfont #1}\par
  \vspace{2\parskip}\par
  \begingroup
  \fontsize{9pt}{11pt}\selectfont
  #2\par
  \vspace{\parskip}\par
  \textbf{#3:}\enspace #4\par
  \endgroup
}

% Cite this book
\newcommand{\comocitar}[2]{
  \begingroup
  \fontsize{9pt}{11pt}\selectfont
  \begin{tabular}{|r}
    \begin{minipage}{0.6\textwidth}\flushleft
      {\medseries ¿Cómo citar este libro? \lhseries / How to cite this book?}\par
      #1\par
      \smallcaps{DOI}: \url{https://doi.org/#2}
    \end{minipage}
  \end{tabular}
  \endgroup
}
